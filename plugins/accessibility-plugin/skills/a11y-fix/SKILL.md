---
name: a11y-fix
description: >
  Fix accessibility issues found by a11y-audit. Use when the user asks to
  "fix accessibility", "fix a11y", "fix issue", "fix all a11y",
  "apply a11y fixes", or wants to resolve accessibility problems
  identified in a previous audit.
allowed-tools: Read, Glob, Grep, Bash, Write, Edit
---

# Accessibility Fix Skill

You are applying fixes for accessibility issues identified by the a11y-audit skill. You work from the `a11y-report.json` file generated by the audit.

## Prerequisites

Before starting, verify that `a11y-report.json` exists in the project root:

```bash
cat a11y-report.json 2>/dev/null | head -5
```

If the file does not exist, inform the user they must run `a11y-audit` first and stop.

## Input

The user may specify:

$ARGUMENTS

Supported inputs:
- **Issue ID**: `A11Y-001` — fix a specific issue
- **Category**: `semantics`, `accessible-names`, `images`, `forms`, `aria`, `keyboard`, `patterns` — fix all issues in a category
- **"all"** — fix all auto-fixable issues
- **No input** — prompt the user to choose

## Fix Process

### Step 1: Dry Run

```bash
node "SKILL_DIR/scripts/apply-fix.js" "$(pwd)" "<filter>" --dry-run
```

The `--dry-run` flag shows what would be fixed without making changes. Present this to the user for confirmation.

### Step 2: Apply Fixes

After user confirms, run fixes:

```bash
node "SKILL_DIR/scripts/apply-fix.js" "$(pwd)" "<filter>"
```

### Step 3: Review Results

The script outputs a JSON result with fixed/skipped issues. Review each fix and verify it was applied correctly.

### Step 4: Generate Fix Report

The script creates `a11y-fix-report.md` in the project root with:
- List of fixed issues
- List of skipped issues (with reasons)
- Recommendations for manual fixes

## Fix Scripts

Category-specific fix scripts:

- `scripts/apply-semantics-fix.js` — div→button conversion, tabindex additions
- `scripts/apply-names-fix.js` — aria-label additions for unnamed elements
- `scripts/apply-images-fix.js` — alt attribute additions
- `scripts/apply-forms-fix.js` — label associations and aria-label additions
- `scripts/apply-aria-fix.js` — redundant role removal
- `scripts/apply-keyboard-fix.js` — tabindex corrections
- `scripts/apply-patterns-fix.js` — dialog role and modal attribute additions

## Critical Safety Rules

1. **Dynamic content fixes are NEVER auto-applied.** These require understanding runtime behavior.

2. **Always show the user what will change** before applying fixes. Use `--dry-run` first.

3. **Back up files** before modifying them. The fix scripts handle this automatically.

4. **Verify fixes** after application. Read the modified files to ensure correctness.

5. If a fix would break functionality, **skip it** and note it in the fix report.

## Reference

See [reference/fix-strategies.md](reference/fix-strategies.md) for detailed fix patterns per category.

## After Fixes

1. Present `a11y-fix-report.md` summary to the user
2. List any issues that require manual intervention
3. Recommend re-running `a11y-audit` to verify improvements
